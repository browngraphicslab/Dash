<UserControl
    x:Class="Dash.RichTextView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Dash"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300"
    d:DesignWidth="400">

    <Grid Name="LayoutGrid">
        <Grid.Resources>
            <Style TargetType="Button">
                <Setter Property="Background" Value="{ThemeResource DocumentHighlightBackground}"></Setter>
                <Setter Property="Foreground" Value="{ThemeResource TranslucentWhite}"></Setter>
            </Style>
        </Grid.Resources>
        <!--<Canvas VerticalAlignment="Bottom">-->
        <RichEditBox x:FieldModifier="public" 
                         AllowDrop="True"
                         Grid.Row="0"
                         Foreground="{StaticResource MainText}"
                         GotFocus="xRichEditBox_GotFocus"
                         LostFocus="XRichEditBox_OnLostFocus"
                         Drop="xRichEditBox_Drop"   
                         x:Name="xRichEditBox" 
                         VerticalAlignment="Stretch" 
                         HorizontalAlignment="Stretch" 
                         SelectionChanged="xRichEditBox_SelectionChanged"  
                         BorderThickness="0"
                         IsColorFontEnabled="True" 
                         SelectionHighlightColor="{StaticResource DarkWindowsBlue}"
                         Holding="XRichEditBox_OnHolding"
                         IsTextPredictionEnabled="True"
                         Background="Transparent"
                        
                         >
            <!--FORMAT PROPERTIES TOOLTIP-->
            <ToolTipService.ToolTip>
                <ToolTip x:Name="xFormatTip" Background="{StaticResource DarkBackground}" Padding="3">
                    <ToolTip.Content>
                        <TextBlock x:Name="xFormatTipText" Padding="2" FontSize="10" Foreground="White">
                        </TextBlock>
                    </ToolTip.Content>
                </ToolTip>
            </ToolTipService.ToolTip>
            
            <!--FORMAT OPTIONS FLYOUT-->
            <FlyoutBase.AttachedFlyout>
                <Flyout>
                    <!--A single flyout with a 3 row grid, the last row begins as collapsed-->
                    <Grid Width="300" Height="120">
                        <Grid.Resources>
                            <!--Button style set here-->
                            <Style x:Key="xButtonStyle" TargetType="Button">
                                <Setter Property="Background" Value="Transparent"/>
                                <Setter Property="Height" Value="40"/>
                                <Setter Property="Width" Value="40"/>
                                <Setter Property="HorizontalAlignment" Value="Center"/>
                            </Style>
                        </Grid.Resources>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <!--First row-->
                        <Grid Grid.Row="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="4*"/>
                                <ColumnDefinition Width="2*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <!--Font family combo box-->
                            <ComboBox Height="30" HorizontalAlignment="Stretch" Margin="10,0,10,0" Grid.Column="0" BorderBrush="LightGray"/>
                            <!--Font size combo box-->
                            <ComboBox Height="30" HorizontalAlignment="Stretch" Margin="10,0,10,0" Grid.Column="1" BorderBrush="LightGray"/>
                            <!--Clear style button-->
                            <Button Grid.Column="2" Style="{StaticResource xButtonStyle}">
                                <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE75C;"/>
                            </Button>
                        </Grid>
                        
                        <Grid Grid.Row="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <!--Bold button-->
                            <Button Style="{StaticResource xButtonStyle}" Grid.Column="0">
                                <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE8DD;"/>
                            </Button>
                            <!--Italics button-->
                            <Button Style="{StaticResource xButtonStyle}" Grid.Column="1">
                                <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE8DB;"/>
                            </Button>
                            <!--Underline button-->
                            <Button Style="{StaticResource xButtonStyle}" Grid.Column="2">
                                <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE8DC;"/>
                            </Button>
                            <!--Font color button-->
                            <Button Style="{StaticResource xButtonStyle}" Grid.Column="3">
                                <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE8D3;"/>
                            </Button>
                            <!--Font highlight button TODO: find icon-->
                            <Button Style="{StaticResource xButtonStyle}" Grid.Column="4">
                                <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE8D2;"/>
                            </Button>
                            <!--Bulleted list button-->
                            <Button Style="{StaticResource xButtonStyle}" Grid.Column="5">
                                <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE8FD;"/>
                            </Button>
                            <!--Numbered list button-->
                            <Button Style="{StaticResource xButtonStyle}" Grid.Column="6">
                                <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE8DD;"/>
                            </Button>
                        </Grid>

                        <Grid Grid.Row="2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="1.2*"/>
                                <ColumnDefinition Width=".7*"/>
                                <ColumnDefinition Width=".7*"/>
                                <ColumnDefinition Width=".7*"/>

                            </Grid.ColumnDefinitions>
                            <!--All caps-->
                            <Button Width="50" Style="{StaticResource xButtonStyle}" Grid.Column="0">
                                <TextBlock FontWeight="Medium" FontSize="18" VerticalAlignment="Center" HorizontalAlignment="Center">AA</TextBlock>
                            </Button>
                            <!--Small caps-->
                            <Button Width="50" Style="{StaticResource xButtonStyle}" Grid.Column="1">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                    <TextBlock FontWeight="Medium" FontSize="18" VerticalAlignment="Center" Width="20">A</TextBlock>
                                    <TextBlock FontWeight="Medium" FontSize="12"  VerticalAlignment="Center" Margin="0,4,0,0" Width="20">A</TextBlock>

                                </StackPanel>

                            </Button>
                            <!--Superscript button-->
                            <Button Width="50" Style="{StaticResource xButtonStyle}" Grid.Column="2">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                    <TextBlock FontWeight="Medium" FontSize="18" VerticalAlignment="Center" Width="10">A</TextBlock>
                                    <TextBlock FontWeight="Medium" FontSize="12"  VerticalAlignment="Center" Margin="0,4,0,0" Width="20">A</TextBlock>

                                </StackPanel>
                            </Button>
                            <!--Subscript button-->
                            <Button Style="{StaticResource xButtonStyle}" Grid.Column="3">
                                <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE8DD;"/>
                            </Button>
                            <!--Strikethrough button-->
                            <Button Style="{StaticResource xButtonStyle}" Grid.Column="4">
                                <Grid>
                                    <Rectangle Height="1" Width="20" Margin="0,5,0,0" Fill="Black" HorizontalAlignment="Center" VerticalAlignment="Center"></Rectangle>
                                    <TextBlock FontSize="13" HorizontalAlignment="Center" VerticalAlignment="Center">abc</TextBlock>
                                </Grid>
                            </Button>
                            <!--Left alignment button-->
                            <Button Style="{StaticResource xButtonStyle}" Grid.Column="5">
                                <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE8E4;"/>
                            </Button>
                            <!--Center alignment button-->
                            <Button Style="{StaticResource xButtonStyle}" Grid.Column="6">
                                <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE8E3;"/>
                            </Button>
                            <!--Right alignment button-->
                            <Button Style="{StaticResource xButtonStyle}" Grid.Column="7">
                                <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE8E2;"/>
                            </Button>
                        </Grid>

                    </Grid>
                    
                </Flyout>
                <!--<MenuFlyout>
                    <MenuFlyout.MenuFlyoutPresenterStyle>
                        <Style TargetType="MenuFlyoutPresenter">
                            <Setter Property="Background"  Value="{StaticResource DarkBackground}"></Setter>
                            <Setter Property="Opacity" Value="0.8"></Setter>
                        </Style>
                    </MenuFlyout.MenuFlyoutPresenterStyle>
                    <MenuFlyoutSubItem x:Name="xFormat" Text="Font" Foreground="White" GotFocus="FormatGroup_OnGotFocus">
                        <MenuFlyoutSubItem x:Name="xFont" Text="Font" GotFocus="FontGroup_OnGotFocus" Foreground="White"></MenuFlyoutSubItem>
                        <MenuFlyoutSubItem x:Name="xScript" Text="Script" Foreground="White" GotFocus="FormatGroup_OnGotFocus"></MenuFlyoutSubItem>
                        <MenuFlyoutSubItem x:Name="xCaps" Text="Caps" Foreground="White" GotFocus="FormatGroup_OnGotFocus"></MenuFlyoutSubItem>
                    </MenuFlyoutSubItem>
                    <MenuFlyoutSubItem x:Name="xParagraph" Text="Paragraph" Foreground="White" GotFocus="ParagraphGroup_OnGotFocus">
                        <MenuFlyoutSubItem x:Name="xAlignment" Text="Alignment" Foreground="White" GotFocus="ParagraphGroup_OnGotFocus"></MenuFlyoutSubItem>
                        <MenuFlyoutSubItem x:Name="xListTypes" Text="List" Foreground="White" GotFocus="ParagraphGroup_OnGotFocus"></MenuFlyoutSubItem>
                        <MenuFlyoutSubItem x:Name="xListStyles" Text="List Style" Foreground="White" GotFocus="ParagraphGroup_OnGotFocus"></MenuFlyoutSubItem>
                        <MenuFlyoutSubItem x:Name="xListAlignments" Text="List Alignment" Foreground="White" GotFocus="ParagraphGroup_OnGotFocus"></MenuFlyoutSubItem>
                    </MenuFlyoutSubItem>
                    <MenuFlyoutSubItem x:Name="xHighlight" Text="Higlight" GotFocus="HighlightGroup_OnGotFocus" Foreground="White">
                        <MenuFlyoutSubItem x:Name="xHighlightOpacity" Text="Opacity" GotFocus="HighlightGroup_OnGotFocus" Foreground="White"></MenuFlyoutSubItem>
                    </MenuFlyoutSubItem>
                    <MenuFlyoutSubItem x:Name="xColor" Text="Color" GotFocus="ColorGroup_OnGotFocus" Foreground="White"></MenuFlyoutSubItem>
                    <MenuFlyoutSeparator></MenuFlyoutSeparator>
                    <MenuFlyoutItem x:Name="xResetAll" Text="Reset All" Foreground="White" Click="XResetAll_OnClick"></MenuFlyoutItem>
                </MenuFlyout>-->
            </FlyoutBase.AttachedFlyout>
        </RichEditBox>

        <StackPanel x:Name="xSearchBoxPanel" Grid.Row="0" Orientation="Vertical" HorizontalAlignment="Right"
                        VerticalAlignment="Top" Margin="5" Visibility="Collapsed">
                <StackPanel Orientation="Horizontal"  HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                    <!--EXPAND/COLLAPSE REPLACE BOX BUTTON-->
                    <Button x:Name="xReplaceModeButton" Content="▲" Padding="-3" Height="25" Width="15" Foreground="Gray" FontSize="8" Background="WhiteSmoke"></Button>
                    <!--SEARCH BOX-->
                    <SearchBox x:Name="xSearchBox" Padding="0"  Height="25" Width="100" BorderBrush="Transparent" Background="WhiteSmoke"></SearchBox>
                    <!--BUTTON FOR CLOSING SEARCH REGION-->
                    <Button x:Name="xSearchDelete" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Padding="-3"
                            Height="25" Width="15" VerticalContentAlignment="Top" Background="WhiteSmoke">
                        <TextBlock Text="x" Padding="1"></TextBlock>
                    </Button>
                </StackPanel>
                <!--REPLACE BOX-->
                <StackPanel x:Name="xReplaceBoxPanel" Orientation="Horizontal" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Visibility="Collapsed">
                    <TextBlock Padding="2" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" FontSize="10" Foreground="DimGray">Replace:</TextBlock>
                    <TextBox x:Name="xReplaceBox" Padding="2" HorizontalAlignment="Stretch" Width="90" BorderBrush="Transparent" Background="WhiteSmoke" FontSize="10"></TextBox>
                    <StackPanel.Clip>
                        <RectangleGeometry Rect="0,0,150,20"></RectangleGeometry>
                    </StackPanel.Clip>
                </StackPanel>
            </StackPanel>
        <!--</Canvas>-->
    </Grid>
</UserControl>
